Лабораторная работа №21 по курсу Linux Pro.

Задание:

 - реализовать knocking port
   centralRouter может попасть на ssh inetrRouter через knock скрипт
 - добавить inetRouter2, который виден(маршрутизируется (host-only тип сети для виртуалки)) с хоста или форвардится порт через локалхост.
 - запустить nginx на centralServer.
 - пробросить 80й порт на inetRouter2 8080.
 - дефолт в инет оставить через inetRouter.



Решение:

 - На inetrRouter установлен knockd и закрыт 22 порт на интерфейсе enp0s8. Для доступ по ssh на интерфейсе enp0s8 необходимо выполнить 
knock 192.168.255.1  7000 9000 8000. После этого в iptables добавится разрешающее правило и доступ будет возможен.

 - на роутер inetRouter2 добавлен адаптер с IP адресом 192.168.57.2, на роутере настроен DNAT и SNAT. При curl http://192.168.57.2:8080, идет пересылка пакета на узел centralServer на 80 порт. На этом порту работает nginx.

Разворачивание ВМ и их настройка с помощью vagrant и ansible.